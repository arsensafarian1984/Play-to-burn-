<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TON BURNER</title>
    <style>
        body { 
            margin: 0; 
            background: #000; 
            overflow: hidden; 
            touch-action: none; 
            font-family: sans-serif; 
        }
        #ui { 
            position: absolute; 
            top: 20px; 
            width: 100%; 
            text-align: center; 
            color: #00d4ff; 
            font-size: 28px; 
            font-weight: bold; 
            text-shadow: 0 0 10px rgba(0,212,255,0.5);
            z-index: 10; 
            pointer-events: none; 
        }
        #menu { 
            position: absolute; 
            inset: 0; 
            background: rgba(0,0,0,0.85); 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            color: white; 
            z-index: 100; 
        }
        h1 { color: #00d4ff; margin-bottom: 20px; font-size: 36px; }
        button { 
            padding: 15px 60px; 
            font-size: 20px; 
            background: #00d4ff; 
            border: none; 
            border-radius: 50px; 
            color: #000; 
            font-weight: bold; 
            cursor: pointer; 
            box-shadow: 0 0 20px rgba(0,212,255,0.4);
        }
        canvas { display: block; }
    </style>
</head>
<body>

    <div id="ui">SCORE: <span id="s">0</span></div>
    
    <canvas id="c"></canvas>

    <div id="menu">
        <h1 id="t">TON BURNER</h1>
        <button id="b">START MISSION üî•</button>
    </div>

    <script>
        const canvas = document.getElementById('c');
        const ctx = canvas.getContext('2d');
        
        // ŸÑŸàÿØ ⁄©ÿ±ÿØŸÜ ÿπ⁄©ÿ≥‚ÄåŸáÿß (ÿ≠ÿ™ŸÖÿßŸã ÿ®ÿß€åÿØ logo.png Ÿà fire.png ⁄©ŸÜÿßÿ± ÿß€åŸÜ ŸÅÿß€åŸÑ ÿ®ÿßÿ¥ŸÜÿØ)
        const imgTon = new Image(); 
        imgTon.src = 'logo.png';
        const imgFire = new Image(); 
        imgFire.src = 'fire.png';

        let bird, pipes, score, active = false, frame = 0;
        let gameSpeed = 3.5; // ÿ≥ÿ±ÿπÿ™ ÿ¥ÿ±Ÿàÿπ

        function resize() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.onresize = resize;
        resize();

        function reset() {
            bird = { x: 60, y: canvas.height / 2, v: 0, g: 0.5 };
            pipes = []; 
            score = 0; 
            frame = 0; 
            gameSpeed = 3.5; 
            active = true;
            document.getElementById('menu').style.display = 'none';
            document.getElementById('s').innerText = "0";
            loop();
        }

        function loop() {
            if (!active) return;

            // Ÿæÿ≥‚Äåÿ≤ŸÖ€åŸÜŸá
            ctx.fillStyle = "black";
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // ŸÅ€åÿ≤€å⁄© Ÿæÿ±ŸÜÿØŸá (ŸÑŸà⁄ØŸà€å TON)
            bird.v += bird.g;
            bird.y += bird.v;
            
            // ÿ±ÿ≥ŸÖ ŸÑŸà⁄ØŸà€å TON
            ctx.save();
            ctx.shadowBlur = 15;
            ctx.shadowColor = "#00d4ff";
            ctx.drawImage(imgTon, bird.x - 25, bird.y - 25, 50, 50);
            ctx.restore();

            // ÿ™ŸàŸÑ€åÿØ ŸÖŸàÿßŸÜÿπ ÿ®ÿß ŸÅÿßÿµŸÑŸá ÿßŸÅŸÇ€å ÿ®€åÿ¥ÿ™ÿ± (ÿπÿØÿØ 160)
            let spawnRate = Math.max(80, 160 - (score * 2)); 
            if (frame % Math.floor(spawnRate) === 0) {
                // t ÿßÿ±ÿ™ŸÅÿßÿπ ÿ¥⁄©ÿßŸÅ ÿ±ÿß ÿ™ÿπ€å€åŸÜ ŸÖ€å‚Äå⁄©ŸÜÿØ
                pipes.push({ 
                    x: canvas.width, 
                    t: Math.random() * (canvas.height - 350) + 100, 
                    scored: false 
                });
            }

            // ŸÖÿØ€åÿ±€åÿ™ Ÿà ÿ±ÿ≥ŸÖ ŸÖŸàÿßŸÜÿπ
            pipes.forEach(p => {
                p.x -= gameSpeed;
                
                // ÿ¥ÿπŸÑŸá ÿ®ÿßŸÑÿß (ŸÖÿπ⁄©Ÿàÿ≥)
                ctx.save();
                ctx.translate(p.x + 30, p.t);
                ctx.scale(1, -1);
                ctx.drawImage(imgFire, -30, 0, 60, p.t);
                ctx.restore();

                // ÿ¥ÿπŸÑŸá Ÿæÿß€å€åŸÜ
                ctx.drawImage(imgFire, p.x, p.t + 180, 60, canvas.height - (p.t + 180));

                // ÿ™ÿ¥ÿÆ€åÿµ ÿ®ÿ±ÿÆŸàÿ±ÿØ (Collision)
                if (bird.x + 18 > p.x && bird.x - 18 < p.x + 60) {
                    if (bird.y - 18 < p.t || bird.y + 18 > p.t + 180) {
                        active = false;
                    }
                }

                // ÿ´ÿ®ÿ™ ÿßŸÖÿ™€åÿßÿ≤ Ÿà ÿßŸÅÿ≤ÿß€åÿ¥ ÿ≥ÿ±ÿπÿ™
                if (p.x < bird.x && !p.scored) { 
                    p.scored = true; 
                    score++; 
                    document.getElementById('s').innerText = score;
                    gameSpeed += 0.15; // Ÿáÿ± ÿßŸÖÿ™€åÿßÿ≤ ÿ®ÿßÿ≤€å ÿ±ÿß ÿ≥ÿ±€åÿπ‚Äåÿ™ÿ± ŸÖ€å‚Äå⁄©ŸÜÿØ
                }
            });

            // ÿ≠ÿ∞ŸÅ ŸÑŸàŸÑŸá‚ÄåŸáÿß€å ÿÆÿßÿ±ÿ¨ ÿ¥ÿØŸá ÿßÿ≤ ÿµŸÅÿ≠Ÿá
            pipes = pipes.filter(p => p.x > -100);

            // ÿ®ÿ±ÿÆŸàÿ±ÿØ ÿ®ÿß ÿ≥ŸÇŸÅ Ÿà ⁄©ŸÅ
            if (bird.y > canvas.height || bird.y < 0) active = false;

            // Ÿæÿß€åÿßŸÜ ÿ®ÿßÿ≤€å
            if (!active) {
                document.getElementById('t').innerText = "SCORE: " + score;
                document.getElementById('menu').style.display = 'flex';
                return;
            }

            frame++;
            requestAnimationFrame(loop);
        }

        // ⁄©ŸÜÿ™ÿ±ŸÑ‚ÄåŸáÿß
        document.getElementById('b').onclick = (e) => {
            e.stopPropagation();
            reset();
        };

        const flap = (e) => {
            if (active) {
                bird.v = -8;
            }
            if (e.type === 'touchstart' && active) e.preventDefault();
        };

        window.onmousedown = flap;
        window.ontouchstart = flap;

    </script>
</body>
</html>
